<!-- this partial recursively calls itself as necessary to render the navigation browse level data -->
<%- unless browse_level_data.nil? -%>
  <%- browse_facets = @atrium_exhibit.browse_facet_names if browse_facets.nil? -%>
  <%- browse_level_hash = browse_level_data.first -%>
  <%- if browse_level_hash.has_key?(:solr_facet_name) && browse_level_hash.has_key?(:values) && !browse_level_hash[:values].empty? -%>
    <%- browse_level_hash.has_key?(:label) ? label = browse_level_hash[:label] : label = facet_field_labels[browse_level_hash[:solr_facet_name]] -%> 
    <%- solr_facet_name = browse_level_hash[:solr_facet_name] -%>
    <h3 class="facet-heading"><%= label %></h3>
    <ul>
      <%- browse_level_hash[:values].each do |value| -%>
        <li>
          <%- if browse_level_hash.has_key?(:selected) && browse_level_hash[:selected] == value -%>
	    <span class="selected">
	      <%- selected_path = get_selected_browse_facet_path(solr_facet_name, value, browse_facets) -%>
              <%= link_to("-", selected_path, :class=>"remove") %>
              <%= link_to(value, selected_path, :class=>"browse_facet") %>
            </span>
	    <%- if browse_level_data.size > 1 -%>
	      <%= render :partial => 'shared/navigation_browse_levels', :locals=>{:browse_level_data=>browse_level_data.slice(1,browse_level_data.length-1), :browse_facets=>browse_facets.slice(1, browse_facets.length-1)}%> 
	    <%- end -%>
	  <%- else -%>
	    <%= link_to(value, get_browse_facet_path(solr_facet_name,value,browse_facets)) %>
	  <%- end -%>
	</li>
      <%- end -%>
    </ul>
  <%- end -%>
<%- end -%>
